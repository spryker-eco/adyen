{% extends model('component') %}

{% define config = {
    name: 'adyen-credit-card',
    tag: 'adyen-credit-card',
} %}

{% define data = {
    form: required,
    scriptSrc: data.form.adyenCreditCard.vars.sdkUrl,
    configKey: data.form.adyenCreditCard.vars.sdkOriginKey,
    sdkCheckoutShopperJsUrl: data.form.adyenCreditCard.vars.sdkCheckoutShopperJsUrl,
    sdkCheckoutShopperCssUrl: data.form.adyenCreditCard.vars.sdkCheckoutShopperCssUrl,
    sdkCheckoutShopperJsIntegrityHash: data.form.adyenCreditCard.vars.sdkCheckoutShopperJsIntegrityHash,
    sdkCheckoutShopperCssIntegrityHash: data.form.adyenCreditCard.vars.sdkCheckoutShopperCssIntegrityHash,
    paymentMethods: data.form.adyenCreditCard.vars.sdkPaymentMethods,
    locale: app.locale,
} %}

{% define attributes = {
    'client-config-key': data.configKey,
    'payment-methods-response': data.paymentMethods,
    'container-id': data.form.adyenCreditCard.vars.id,
    'origin-key': data.form.adyenCreditCard.vars.sdkOriginKey,
    'locale': data.locale,
    'environment': 'test',
} %}

{% block body %}
    {{ form_widget(data.form.adyenCreditCard) }}

    {% include molecule('script-loader') with {
        class: config.jsName ~ '__script-loader',
        attributes: {
            src: data.sdkCheckoutShopperJsUrl,
        }
    } only %}

    <link rel="stylesheet" href="{{ data.sdkCheckoutShopperCssUrl }}" integrity="{{ data.sdkCheckoutShopperCssIntegrityHash }}" crossorigin="anonymous">
{% endblock %}
